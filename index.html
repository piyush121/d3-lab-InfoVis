<html>

  <head>
    <title>GapMinder</title>
  </head>
   <style> body {
   margin: 10px;
 }
 
 h1 {
   background-color: black;
   color: white;
 }

 ul#countries {
    list-style: none;
    margin: 0px;                
    padding: 0px;
    float: left;
    }
 ul#countries li {
        padding: 5px;
    }
 
 </style>


  <script src="https://d3js.org/d3.v3.min.js"></script>

  <Body>
    <p>
      <h1>
<p>
Gapminder - Wealth and Health of Nations
</p>
</h1>
      <h2>
Countries
</h2>
<ul id="countries">
</ul>
<svg width="1024" height="768">
      <g id="myDIV">
      </g>
</svg>
    
<script>
   var url = "https://raw.githubusercontent.com/CristianFelix/infoviz/master/Week%203/newData.json";

var viz = d3.select("#myDIV");
var namesViz = d3.select("#countries");

var width = 1024,
    height = 768,
    margin = { top: 10, left: 10, right: 20, bottom: 20},
    innerWidth = width - margin.left - margin.right,
    innerHeight = height - margin.top - margin.bottom;

var xScale = d3.scale.linear()
    .range([0, innerWidth]),
    yScale = d3.scale.linear()
    .range([innerHeight, 0]),
    radScale = d3.scale.linear()
    .range([5, 25]),
    colorScale = d3.scale.category10();

viz.attr("transform",
        "translate(" + margin.left + "," + margin.top +")")

d3.json(url, function(error, result) {
countries = result.filter(function(d) { return d.income[2008] != undefined });
render(countries);
});

function render(data) {

namesViz.selectAll("li")
    .data(data)
    .enter()
    .append('li')
    .text(function(d) {
        return d.name;
    })

xScale.domain(d3.extent(data, function(d) { return d.income[2008]}));
yScale.domain(d3.extent(data, function(d) { return d.lifeExpectancy[2008]}));
radScale.domain(d3.extent(data, function(d) { return d.population[2008] }));


var changes = viz.selectAll("circle")
 .data(data)
 .enter()
 .append("circle")
 .attr("r", function(d) { return radScale(d.population[2008]) })
 .attr("cx", function(d, i) { return xScale(d.income[2008]) })
 .attr("cy", function(d, i) { return yScale(d.lifeExpectancy[2008]) })
 .attr("fill", function(d, i) { return colorScale(d.region) })
 .attr("opacity", 0.8);

}
 </script>
  </Body>

</html>
