<html>

  <head>
    <title>GapMinder</title>
  </head>
   <style> body {
   margin: 10px;
 }
 
 h1 {
   background-color: black;
   color: white;
 }

 ul#countries {
    list-style: none;
    margin: 0px;                
    padding: 0px;
    float: left;
    }
 ul#countries li {
        padding: 5px;
    }

 .domain{
 	fill: none;
 	stroke: #000;
 }

 .tick {
 	fint-size: 12;
 }
 .tick line {
 	stroke: #ccc
 }
 
 </style>


  <script src="https://d3js.org/d3.v3.min.js"></script>

  <Body>
    <p>
      <h1>
<p>
Gapminder - Wealth and Health of Nations
</p>
</h1>
      <h2>
Countries
</h2>
<ul id="countries">
</ul>
<svg width="1024" height="768">
      <g id="myDIV">
      </g>
</svg>
    
<script>
   var url = "https://raw.githubusercontent.com/CristianFelix/infoviz/master/Week%203/newData.json";

var viz = d3.select("#myDIV");
var namesViz = d3.select("#countries");
var year = 2008;
var width = 1024,
    height = 768,
    margin = { top: 10, left: 30, right: 20, bottom: 20},
    innerWidth = width - margin.left - margin.right,
    innerHeight = height - margin.top - margin.bottom;
var xAxisGroup = viz.append("g")
					.attr("transform", "translate(" + margin.left + "," + (innerHeight + margin.top) +")");
var yAxisGroup = viz.append("g")
					.attr("transform", "translate(" + margin.left + "," + margin.top +")");

var dotGroup = viz.append("g")
					.attr("transform", "translate(" + margin.left + "," + margin.top +")");


d3.json(url, function(error, result) {
countries = result.filter(function(d) { return d.income[year] != undefined });
render(countries);
});

function render(data) {

namesViz.selectAll("li")
    .data(data)
    .enter()
    .append('li')
    .text(function(d) {
        return d.name;
    })


var xScale = d3.scale.linear()
    .range([0, innerWidth])
    .domain([-1000, d3.max(data, function(d) {return d.income[year]}) ]),
    yScale = d3.scale.linear()
    .range([innerHeight, 0])
    .domain(d3.extent(data, function(d) {return d.lifeExpectancy[year]})),
    radScale = d3.scale.linear()
    .range([50, 1000]),
    colorScale = d3.scale.category10();

var xAxis = d3.svg.axis()
			  .tickSize(-738)
			  .scale(xScale)
			  .orient("bottom")
var yAxis = d3.svg.axis()
			  .tickSize(-974)
			  .scale(yScale)
			  .orient("left")

xScale.domain(d3.extent(data, function(d) { return d.income[year]}));
yScale.domain(d3.extent(data, function(d) { return d.lifeExpectancy[year]}));
radScale.domain(d3.extent(data, function(d) { return d.population[year] }));

xAxisGroup.call(xAxis);
yAxisGroup.call(yAxis);
dotGroup.selectAll("circle")
.data(data)
.enter()
.append("circle")
	.attr("r", function(d) { return Math.sqrt(radScale(d.population[year])/Math.PI)})
	.attr("cx", function(d, i) { return xScale(d.income[year]) })
	.attr("cy", function(d, i) { return yScale(d.lifeExpectancy[year]) })
	.attr("fill", function(d, i) { return colorScale(d.region) })
	.attr("opacity", 0.8);

}
 </script>
  </Body>

</html>
